<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/index.css">
</head>
<body style="height: 2000px">
<!--布局容器-->
<div class="wrap">
    <!--窗口侧边栏-->
    <div class="toolBar toolOut">
        <!--内容区-->
        <div class="content"></div>
        <!--按钮-->
        <div class="toolBtn list">

        </div>
        <!--列表-->
        <ul class="toolList">
            <li>
                <i class="icon"></i>
                <em>尚品会员</em>
            </li>
            <li>
                <i class="icon"></i>
                <em>尚品会员</em>
            </li>
            <li>
                <i class="icon"></i>
                <em>尚品会员</em>
            </li>
            <li>
                <i class="icon"></i>
                <em>尚品会员</em>
            </li>
            <li>
                <i class="icon"></i>
                <em>尚品会员</em>
            </li>
            <li>
                <i class="icon"></i>
                <em>尚品会员</em>
            </li>
        </ul>

    </div>
    <!--头部-->
    <header class="header">
        <div class="top">
            <div class="topMain">
                <!--登录注册-->
                <div class="login">
                    <h5>欢迎来到尚品汇！&nbsp;&nbsp;&nbsp;请</h5>
                    <p>
                        <a href="##">登录</a>
                        <a href="##">注册</a>
                    </p>
                </div>
                <!--导航-->
                <!--导航的结构是否需要使用ul+li+a来设置  取决于这个导航是静态导航还是动态导航-->
                <nav class="topNav">
                    <a href="##">我的订单</a>
                    <a href="##">我的购物车</a>
                    <a href="##">我的尚品汇</a>
                    <a href="##">尚品汇会员</a>
                    <a href="##">企业采购</a>
                    <a href="##">关注尚品汇</a>
                    <a href="##">合作招商</a>
                    <a href="##">商家后台</a>
                </nav>
            </div>
        </div>
        <div class="bottom">
            <div class="bottomMain">
                <!--logo-->
                <h1>
                    <a href="##">
                        <img src="images/Logo.png" alt="">
                    </a>
                </h1>
                <!--搜索-->
                <div class="search">
                    <input type="text">
                    <button>搜索</button>
                </div>
            </div>
        </div>
    </header>
    <!--商品分类导航-->
    <div class="typeNav">
        <div class="typeNavMain">
            <h3>全部商品分类</h3>
            <div>
                <a href="##">服装城</a>
                <a href="##">美妆馆</a>
                <a href="##">尚品汇超市</a>
                <a href="##">全球购</a>
                <a href="##">闪购</a>
                <a href="##">团购</a>
                <a href="##">有趣</a>
                <a href="##">秒杀</a>
            </div>
        </div>
    </div>
    <!--商品内容-->
    <div class="main">
        <div class="mainCon">
            <!--路径导航-->
            <div class="conPoin">
                <!--手机、数码、通讯/手机/Apple苹果/iphone 6S系类-->
                <!--<a href="##">手机、数码、通讯</a>-->
                <!--<i>/</i>-->
                <!--<a href="##">手机</a>-->
                <!--<i>/</i>-->
                <!--<a href="##">Apple苹果</a>-->
                <!--<i>/</i>-->
                <!--<a>iphone 6S系类</a>-->
            </div>
            <!--商品展示区-->
            <div class="infoWrap">
                <!--放大镜区域-->
                <div class="previwWrap">
                    <!--放大镜-->
                    <div class="previw">
                        <!--小图容器-->
                        <div class="zoomImg">
                            <!--<img src="images/s1.png" alt="">-->
                        </div>
                        <!--蒙版-->
                        <!--大图容器-->
                    </div>
                    <!--缩略图-->
                    <div class="thumbnail">
                        <a href="javascript:;" class="prev">&lt;</a>
                        <div class="itemWrap">
                            <ul class="list">
                                <!--<li><img src="images/s1.png" alt=""></li>-->
                                <!--<li><img src="images/s2.png" alt=""></li>-->
                                <!--<li><img src="images/s3.png" alt=""></li>-->
                                <!--<li><img src="images/s1.png" alt=""></li>-->
                                <!--<li><img src="images/s2.png" alt=""></li>-->
                                <!--<li><img src="images/s3.png" alt=""></li>-->
                                <!--<li><img src="images/s1.png" alt=""></li>-->
                                <!--<li><img src="images/s2.png" alt=""></li>-->
                                <!--<li><img src="images/s3.png" alt=""></li>-->
                                <!--<li><img src="images/s1.png" alt=""></li>-->
                            </ul>
                        </div>
                        <a href="javascript:;" class="next">&gt;</a>
                    </div>

                </div>
                <!--详情区域-->
                <div class="info">
                    <div class="infoTop">
                        <!--<h3>Apple iPhone 6s（A1700）64G玫瑰金色 移动通信电信4G手机</h3>-->
                        <!--<p class="news">推荐选择下方[移动优惠购],手机套餐齐搞定,不用换号,每月还有花费返</p>-->
                        <!--<div class="priceArea">-->
                            <!--<div class="priceTop">-->
                                <!--<p class="title">价&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;格</p>-->
                                <!--<p class="price">-->
                                    <!--<i>¥</i>-->
                                    <!--<span>5299</span>-->
                                    <!--<em>降价通知</em>-->
                                <!--</p>-->
                                <!--<p class="remark">-->
                                    <!--<i>累计评价</i>-->
                                    <!--<span>123456</span>-->
                                <!--</p>-->
                            <!--</div>-->
                            <!--<div class="priceBottom">-->
                                <!--<p class="title">促&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;销</p>-->
                                <!--<div><i>加价购</i><span>满999.00另加20.00元，或满1999.00另加30.00元，或满2999.00另加40.00元，即可在购物车换购热销商品</span></div>-->
                            <!--</div>-->
                        <!--</div>-->
                        <!--<div class="support">-->
                            <!--<div>-->
                                <!--<p class="title">支&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;持</p>-->
                                <!--<p class="text">以旧换新，闲置手机回收 4G套餐超值抢 礼品购</p>-->
                            <!--</div>-->
                            <!--<div>-->
                                <!--<p class="title">配&nbsp;送&nbsp;至</p>-->
                                <!--<p class="text">广东省 深圳市 宝安区</p>-->
                            <!--</div>-->
                        <!--</div>-->
                    </div>

                    <!--筛选区域-->
                    <div class="choose">
                        <!--选择结果-->
                        <div class="choosed">
                            <!--标记标签-->
                            <!--<mark>银色<a href="javascript:;">X</a></mark>-->
                            <!--<mark>银色<a href="javascript:;">X</a></mark>-->
                        </div>
                        <div class="chooseArea">
                            <!--<dl>-->
                                <!--<dt>选择颜色</dt>-->
                                <!--<dd>金色</dd>-->
                                <!--<dd>银色</dd>-->
                                <!--<dd>黑色</dd>-->
                            <!--</dl>-->
                            <!--<dl>-->
                                <!--<dt>内存容量</dt>-->
                                <!--<dd>16G</dd>-->
                                <!--<dd>64G</dd>-->
                                <!--<dd>128G</dd>-->
                                <!--<dd>512G</dd>-->
                            <!--</dl>-->
                            <!--<dl>-->
                                <!--<dt>选择版本</dt>-->
                                <!--<dd>公开版</dd>-->
                                <!--<dd>移动版</dd>-->
                            <!--</dl>-->
                            <!--<dl>-->
                                <!--<dt>购买方式</dt>-->
                                <!--<dd>官方标配</dd>-->
                                <!--<dd>优惠移动版</dd>-->
                                <!--<dd>电信优惠版</dd>-->
                            <!--</dl>-->
                        </div>
                        <div class="carWrap">
                            <div class="control">
                                <input type="text" value="1">
                                <a href="javascript:;" class="plus">+</a>
                                <a href="javascript:;" class="minus">-</a>
                            </div>
                            <button class="addCar">加入购物车</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="detailWrap">
        <!--侧边栏-->
        <aside>
            <!--选项卡按钮-->
            <div class="tabWrap">
                <h4 class="active">相关分类</h4>
                <h4>推荐品牌</h4>
            </div>
            <!--选项卡内容-->
            <div class="tabContent">
                <div class="active">
                    <ul class="partList">
                        <li>手机</li>
                        <li>手机壳</li>
                        <li>内存卡</li>
                        <li>iphone配件</li>
                        <li>贴膜</li>
                        <li>手机耳机</li>
                        <li>移动电源</li>
                        <li>平板电脑</li>
                    </ul>
                    <ul class="goodsList">
                        <li>
                            <div class="gImg">
                                <img src="images/part01.png" alt="">
                            </div>
                            <p class="partName">Apple苹果iPhone 6s (A1699)</p>
                            <p class="price">¥6088.00</p>
                            <div class="carBox">
                                <a href="javascript:;">加入购物车</a>
                            </div>
                        </li>
                        <li>
                            <div class="gImg">
                                <img src="images/part01.png" alt="">
                            </div>
                            <p class="partName">Apple苹果iPhone 6s (A1699)</p>
                            <p class="price">¥6088.00</p>
                            <div class="carBox">
                                <a href="javascript:;">加入购物车</a>
                            </div>
                        </li>
                        <li>
                            <div class="gImg">
                                <img src="images/part01.png" alt="">
                            </div>
                            <p class="partName">Apple苹果iPhone 6s (A1699)</p>
                            <p class="price">¥6088.00</p>
                            <div class="carBox">
                                <a href="javascript:;">加入购物车</a>
                            </div>
                        </li>
                        <li>
                            <div class="gImg">
                                <img src="images/part01.png" alt="">
                            </div>
                            <p class="partName">Apple苹果iPhone 6s (A1699)</p>
                            <p class="price">¥6088.00</p>
                            <div class="carBox">
                                <a href="javascript:;">加入购物车</a>
                            </div>
                        </li>
                    </ul>
                </div>
                <div>推荐品牌</div>
            </div>
        </aside>
        <!--详情-->
        <div class="detail">
            <!--选择搭配-->
            <div class="fitting">
                <h4>选择搭配</h4>
                <div class="goodSuits">
                    <div class="master">
                        <img src="images/l-m01.png" alt="">
                        <p>¥5299</p>
                        <i>+</i>
                    </div>
                    <ul class="suits">
                        <li class="item">
                            <img src="images/dp01.png" alt="">
                            <p>Feless费勒斯VR</p>
                            <label>
                                <input type="checkbox" value="50">
                                <span>50</span>
                            </label>
                        </li>
                        <li class="item">
                            <img src="images/dp02.png" alt="">
                            <p>Feless费勒斯VR</p>
                            <label>
                                <input type="checkbox" value="50">
                                <span>50</span>
                            </label>
                        </li>
                        <li class="item">
                            <img src="images/dp03.png" alt="">
                            <p>Feless费勒斯VR</p>
                            <label>
                                <input type="checkbox" value="50">
                                <span>50</span>
                            </label>
                        </li>
                        <li class="item">
                            <img src="images/dp04.png" alt="">
                            <p>Feless费勒斯VR</p>
                            <label>
                                <input type="checkbox" value="50">
                                <span>50</span>
                            </label>
                        </li>
                    </ul>
                    <div class="result">
                        <div>已购0件商品</div>
                        <h5>套餐价</h5>
                        <p>¥5299</p>
                        <button>加入购物车</button>
                    </div>
                </div>
            </div>
            <!--商品详情-->
            <div class="intro">
                <ul class="tabWrap">
                    <li class="active"><a href="javascript:;">商品介绍</a></li>
                    <li><a href="javascript:;">规格与包装</a></li>
                    <li><a href="javascript:;">售后保障</a></li>
                    <li><a href="javascript:;">商品评价</a></li>
                    <li><a href="javascript:;">手机社区</a></li>
                </ul>
                <div class="tabContent">
                    <div class="active">
                        <ul>
                            <li>分辨率：1920*1080(FHD)</li>
                            <li>后置摄像头：1200万像素</li>
                            <li>前置摄像头：500万像素</li>
                            <li>核 数：其他</li>
                            <li>频 率：以官网信息为准</li>
                            <li>品牌： Apple</li>
                            <li>商品名称：APPLEiPhone 6s Plus</li>
                            <li>商品编号：1861098</li>
                            <li>商品产地：中国大陆</li>
                            <li>商品毛重：0.51kg</li>
                            <li>热点：指纹识别，Apple Pay，金属机身，拍照神器</li>
                            <li>系统：苹果（IOS）</li>
                            <li>像素：1000-1600万品毛重：0.51kg</li>
                            <li>机身内存：64GB</li>
                        </ul>
                        <img src="images/intro01.png" alt="">
                        <img src="images/intro02.png" alt="">
                        <img src="images/intro03.png" alt="">
                    </div>
                    <div>规格与包装</div>
                    <div>售后保障</div>
                    <div>商品评价</div>
                    <div>手机社区</div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript" src="js/data.js"></script>
<script type="text/javascript">
    window.onload = function () {
//        放大镜大图的id
        var previwId = 0;
//        console.log(goodData)
//      路径导航
        conPoin();
        function conPoin() {
//            获取父元素
            var conPoinNode = document.querySelector('.wrap .main .mainCon .conPoin');
            var pathData = goodData.path;
//          遍历数据 创建相应的结构
            for (var i = 0; i < pathData.length; i++) {
//               循环每执行一次一定要创建一个a标签
                var aNode = document.createElement('a');
                if(i == pathData.length-1){
//                    最后一个a   不需要创建i标签 不需要添加href属性
                    aNode.innerHTML = pathData[i].title;
                    conPoinNode.appendChild(aNode);
                }else{
//                    创建一个i  添加href属性
                    aNode.innerHTML = pathData[i].title;
                    aNode.href = pathData[i].url;
                    conPoinNode.appendChild(aNode);
//                    创建i标签
                    var iNode = document.createElement('i');
                    iNode.innerHTML = '/';
                    conPoinNode.appendChild(iNode);
                }

            }
        }
//      放大镜
        previw();
        function previw() {
//          父容器
            var previwNode = document.querySelector('.wrap .main .mainCon .infoWrap .previwWrap .previw');
//          小图容器
            var smallBox = document.querySelector('.wrap .main .mainCon .infoWrap .previwWrap .previw .zoomImg');
//          获取数据
            var imgSrc = goodData.imagessrc;
//          初始化小图
            var smallImg = new Image();
//          小图默认的src  就是数据当中的第一个对象的s属性
            smallImg.src = imgSrc[0].s;
            smallBox.appendChild(smallImg);
//          初始化蒙版
            var maskNode = null;
//          创建大图容器
            var bigBox = null;
//          创建大图
            var bigImg = null;
            previwNode.onmouseenter = function () {
                if(!maskNode){
//                创建蒙版
                    maskNode = document.createElement('div');
//                 给蒙版元素添加样式
                    maskNode.className = 'mask';
//                  将蒙版添加到小图容器当中
                    smallBox.appendChild(maskNode);
//                  大图容器
                    bigBox = document.createElement('div');
                    bigBox.className = 'bigBox';
//                  创建大图
//                    bigImg = document.createElement('img');
//                  这两种方式对于我们操作来说  得到的结果都是一样的 就是一个img标签的dom对象
                    bigImg = new Image();
//                  根据保存的缩略图点击的索引 去数据当中访问对应的对象的b属性
                    bigImg.src = imgSrc[previwId].b;
//                  将大图放到大图容器当中
                    bigBox.appendChild(bigImg);
//                  将大图容器放入到页面当中
                    previwNode.appendChild(bigBox)

                }
//                移动事件
                smallBox.onmousemove = function (event) {
//                  鼠标的坐标 - 放大镜容器距视口的距离 - 蒙版宽度的一半
                    var maskPosition = {
                        left:event.clientX - previwNode.getBoundingClientRect().left - maskNode.offsetWidth/2,
                        top:event.clientY - previwNode.getBoundingClientRect().top - maskNode.offsetHeight/2
                    };
//                  边界值判断
                    if(maskPosition.left < 0){
                        maskPosition.left = 0;
                    }else if(maskPosition.left > previwNode.clientWidth - maskNode.offsetWidth){
                        maskPosition.left = previwNode.clientWidth - maskNode.offsetWidth;
                    }
                    if(maskPosition.top < 0){
                        maskPosition.top = 0
                    }else if(maskPosition.top > previwNode.clientHeight - maskNode.offsetHeight){
                        maskPosition.top = previwNode.clientHeight - maskNode.offsetHeight;
                    }
                    maskNode.style.left = maskPosition.left + 'px';
                    maskNode.style.top = maskPosition.top + 'px';
//                  计算大图移动的位置= 蒙版当前的位置 / scale
//                  蒙版可移动距离（放大镜容器宽度-蒙版的宽度） /  大图可移动距离（大图的宽度 - 大图容器的宽度）
                    var scale = (previwNode.clientWidth - maskNode.offsetWidth) / (bigImg.offsetWidth - bigBox.clientWidth)
                    var bigImgPosition = {
                        left : maskPosition.left / scale,
                        top:maskPosition.top / scale
                    };
                    bigImg.style.marginLeft = -bigImgPosition.left + 'px';
                    bigImg.style.marginTop = -bigImgPosition.top + 'px';

                };
//                离开事件
                previwNode.onmouseleave = function () {
//                  移动事件和离开事件的解绑   及删除蒙版元素 大图容器 大图
                    smallBox.removeChild(maskNode);
                    previwNode.removeChild(bigBox);
//                  重置蒙版元素
                    maskNode = null;
                    bigImg = null;
                    bigBox = null;
                    smallBox.onmousemove = previwNode.onmouseleave = null;
                }

            }

        }
//        缩略图
        thumbnail();
        function thumbnail() {
//           获取左右按钮
            var prev = document.querySelector('.wrap .main .mainCon .infoWrap .previwWrap .thumbnail .prev');
            var next = document.querySelector('.wrap .main .mainCon .infoWrap .previwWrap .thumbnail .next');
//            图片容器
            var list = document.querySelector('.wrap .main .mainCon .infoWrap .previwWrap .thumbnail .itemWrap .list');
            
//          缩略图动态加载
            var imgSrc = goodData.imagessrc;
//            console.log(imgSrc);
//            forEach  回调函数可以传递三个参数  第一个必填 代表当前遍历的元素   第二个  当前的索引   第三个选填正在被遍历的数组
            imgSrc.forEach(function (item) {
//                创建li
                var liNode = document.createElement('li');
//                创建一个图片
                var imgNode = new Image();
//                给图片设置src   item代表数组当中的每一个元素    我们需要访问每一个元素的s属性
                imgNode.src = item.s;
                liNode.appendChild(imgNode);
                list.appendChild(liNode);
            });

//            获取图片集合
            var items = document.querySelectorAll('.wrap .main .mainCon .infoWrap .previwWrap .thumbnail .itemWrap .list li');
//          定义每次移动的图片张数
            var moveNum = 2;
//          定义总张数
            var imgNum = items.length;
//          显示图片的张数
            var showNum = 5;
//          计算单次移动的距离   (一个元素的宽+一个marginRight)*每次移动的图片张数
            var moveLeft = (items[0].offsetWidth + 20) * moveNum;
//          计算一共可以移动的距离  （ 总张数 - 显示张数） *  (元素宽度 + marginRight)
            var countLeft = (imgNum - showNum) * (items[0].offsetWidth + 20);
//          初始化走过的距离    一共移动过多远 针对右侧按钮
            var tempLeft = 0;

//          给next按钮绑定单击事件
            next.onclick = function () {
                //          剩余距离 = 总距离 - 走过的距离
//              如果已经走过的距离 小于 总共可以移动的距离 才能够移动
                if(tempLeft < countLeft){
//                  只要能够进入这个if当中 就说明当前右侧还有移动的空间
//                  所以我们需要判断  当前剩余的距离 究竟够不够正常移动两张  够两张 走两张  不够 就走剩余
                    if(countLeft - tempLeft > moveLeft){
                        tempLeft += moveLeft;
                    }else{
//                      能够进入这个else里边 说明整个图片右侧已经走完了  所以直接等于总移动距离 就行了
                        tempLeft = countLeft;
                    }
                    list.style.left = -tempLeft + 'px';
                }
            };
            prev.onclick = function () {
//              点击右侧按钮 已经走过的距离（tempLeft） 只要不为0    就可以移动
                if(tempLeft > 0){
                    if(tempLeft > moveLeft){
//                        就说明左侧的空间允许移动两张图片
                        tempLeft -= moveLeft;
                    }else{
//                      能够进入这个else当中就说明 左侧还有空间 但是不够移动两张 说明到头了   直接赋值为0
                        tempLeft = 0;
                    }
                    list.style.left = -tempLeft + 'px';
                }
            }
        }
//        缩略图点击
        thumbnailClick();
        function thumbnailClick() {
//          li集合
            var items = document.querySelectorAll('.wrap .main .mainCon .infoWrap .previwWrap .thumbnail .itemWrap .list li');
//          小图
            var smallImg = document.querySelector('.wrap .main .mainCon .infoWrap .previwWrap .previw .zoomImg img');
            var imgSrc = goodData.imagessrc;
//          循环给每一个li绑定单击事件
            for (var i = 0; i < items.length; i++) {
                items[i].index = i;
                items[i].onclick = function () {
//                    操作小图src   当前点击第几个li  就去数据当中访问第几个对象的s属性
                    smallImg.src = imgSrc[this.index].s;
//                  在这个位置没有办法直接操作大图的src  因为你只要点击了缩略图  你的大图一定还不存在呢
                    previwId = this.index;
                }
            }

        }

        //      商品筛选 数据动态渲染
        choose();
        function choose() {
           var crumbData = goodData.goodsDetail.crumbData;
//         这个数组的长度就是dl的个数
//         每一个对象的title属性  就是dt的文本
//          每一个对象的data的长度就是dd个数 data数组当中每一个元素的值 就是dd文本
//          获取父元素
            var chooseArea = document.querySelector('.wrap .main .mainCon .infoWrap .info .choose .chooseArea');
            var choosed = document.querySelector('.wrap .main .mainCon .infoWrap .info .choose .choosed');
            crumbData.forEach(function (item) {
//              每次遍历进来  先创建一个dl
                var dlNode = document.createElement('dl');
//              每一个dl当中只有一个dt  所以可以直接在这里创建
                var dtNode = document.createElement('dt');
//              将当前对象的title属性的值 设置给dt当文本
                dtNode.innerHTML = item.title;
//              将dt放入到dl当中
                dlNode.appendChild(dtNode);
//              根据当前对象的data属性 来创建相应的dd
                item.data.forEach(function (item) {
//                   在这层循环内 我当前的item对应的是 data当中每一个元素的值
//                    创建dd
                    var ddNode = document.createElement('dd');
//                    给dd设置文本
                    ddNode.innerHTML = item.type;
//                  通过自定义属性 来存储这个选项应该改变的价钱
                    ddNode.setAttribute('changePrice',item.changePrice);
//                    dd放入到dl当中
                    dlNode.appendChild(ddNode);
                });
                chooseArea.appendChild(dlNode);
            });
            var dlList = document.querySelectorAll('.wrap .main .mainCon .infoWrap .info .choose .chooseArea dl');
//          声明一个数组  长度与dl的长度相等
            var arr = new Array(dlList.length);
//            for (var i = 0; i < arr.length; i++) {
//                arr[i] = 0;
//            }
//          使用传入的参数 填充数组的每一个元素
            arr.fill(0);
//            console.log(arr)
//          遍历所有的dl标签，然后给当前dl标签中的dd绑定事件
            for (var i = 0; i < dlList.length; i++) {
//              给dl添加索引   因为需要根据当前点击的dd 找到父元素dl的索引  然后将当前dd 的文本存入到数组对应的位置当中
                dlList[i].index = i;
                (function () {
                    var ddList = dlList[i].getElementsByTagName('dd');
    //               var ddList = dlList[0].getElementsByTagName('dd');
    //               var ddList = dlList[1].getElementsByTagName('dd');
    //               var ddList = dlList[2].getElementsByTagName('dd');
    //               var ddList = dlList[3].getElementsByTagName('dd');
                    for (var j = 0; j < ddList.length; j++) {
                        ddList[j].onclick = function () {
    //                      给当前点击的dd改变字体颜色为红色    清除当前点击这个dd所有兄弟元素dd的颜色
                            for (var i = 0; i < ddList.length; i++) {
                                ddList[i].style.color = '#666'
                            }
                            this.style.color = 'red';
//                            console.log(this.parentNode.index);
//                          为了保证选择的结果是有序的  我们每次都要根据当前点击的dd 找到其父元素dl的索引
//                          然后通过这个索引向数组当中存内容
                            arr[this.parentNode.index] = this;
//                          新增条件后 需要重新计算价钱
                            priceSum(arr);
                            console.log(arr);
//                          在每次创建新的结构之前  要清空整个储存选择结果的父元素
                            choosed.innerHTML = '';
//                          遍历数组创建对应的结构
                            arr.forEach(function (item,index) {
//                              只有当前元素当中有内容的时候我们才创建
//                                [0, "64G", 0, "优惠移动版"]
//                                [0, "dd", 0, "dd"]
                                if(item){
                                    var markNode = document.createElement('mark');
                                    markNode.innerHTML = item.innerHTML;
                                    var aNode = document.createElement('a');
                                    aNode.innerHTML = 'X';
//                                  为让每一个选择结果 能够通过索引找到对应的那一组选项（dl）
                                    aNode.setAttribute('num',index);
//                                  将a标签放入到mark当中
                                    markNode.appendChild(aNode);
                                    choosed.appendChild(markNode);
                                }
                            });
//                          删除逻辑
                            var aList = document.querySelectorAll('.wrap .main .mainCon .infoWrap .info .choose .choosed mark a');
                            for (var i = 0; i < aList.length; i++) {
                                aList[i].onclick = function () {
                                    var num = parseInt(this.getAttribute('num'));
                                    console.log(num);
//                                  根据当前点击的a标签删除对应的mark
                                    choosed.removeChild(this.parentNode);
//                                  当当前的选项被删除时   需要把arr这个数组当中对应位置的数据清空
                                    arr[num] = 0;
//                                  删除选项后 需要重新计算价钱
                                    priceSum(arr);
//                                  获取当前a标签的自定义属性   找到对应的dl获取当前这个选项对应dd 的集合
                                    var ddNodes = dlList[num].getElementsByTagName('dd');
                                    console.log(ddNodes)
//                                   重置高亮  清空当前这组dd的高亮    给第一个dd添加高亮
                                    for (var i = 0; i < ddNodes.length; i++) {
                                        ddNodes[i].style.color = '#666';
                                    }
                                    ddNodes[0].style.color = 'red';
                                    console.log(arr)
                                }
                                
                            }

                        }
                    }
                })()

            }
//          商品价格计算     但凡是修改过arr这个数组的地方 都需要调用这个函数  因为筛选条件发生变化  价格必然改变
            function priceSum(arr) {
//              根据选择结果数组当中存储的所有的dd  依次访问changePrice属性  和原价+=
                var price = goodData.goodsDetail.price;
                var priceNode = document.querySelector('.wrap .main .mainCon .infoWrap .info .infoTop .priceArea .priceTop .price span');
                arr.forEach(function (item) {
//              当前遍历这个数组的值  就是你的选择结果数组   item对应里边的每一个dd
                    if(item){
                        price += parseInt(item.getAttribute('changePrice'));
                    }
                });
                console.log(price);
                priceNode.innerHTML = price;
//              一下是选择搭配区域的价格联动
//              搭配前价格元素
                var masterPNode = document.querySelector('.wrap .detailWrap .detail .fitting .goodSuits .master p');
//              搭配后价格元素
                var resultPNode = document.querySelector('.wrap .detailWrap .detail .fitting .goodSuits .result > p');
//              选择搭配的复选框集合
                var checkNodes = document.querySelectorAll('.wrap .detailWrap .detail .fitting .goodSuits .suits li input');
//              搭配前的价格  就应该和商品当前价钱相同
                masterPNode.innerHTML = '¥'+price;
//              搭配后的价钱 应该是商品当前价钱 + 所有选中的复选框的value
                for (var i = 0; i < checkNodes.length; i++) {
                    if(checkNodes[i].checked){
                        price+=parseInt(checkNodes[i].value);
                    }
                }
//              代码执行到这列price就已经是搭配后的价格了
                resultPNode.innerHTML = '¥'+ price;

            }
        }
//      商品价钱区域 数据动态渲染
        infoData();
        function infoData() {
            var infoTop = document.querySelector('.wrap .main .mainCon .infoWrap .info .infoTop');
            var goodsDetail = goodData.goodsDetail;
            var str = `<h3>${goodsDetail.title}</h3>
                        <p class="news">${goodsDetail.recommend}</p>
                        <div class="priceArea">
                            <div class="priceTop">
                                <p class="title">价&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;格</p>
                                <p class="price">
                                    <i>¥</i>
                                    <span>${goodsDetail.price}</span>
                                    <em>降价通知</em>
                                </p>
                                <p class="remark">
                                    <i>累计评价</i>
                                    <span>${goodsDetail.evaluateNum}</span>
                                </p>
                            </div>
                            <div class="priceBottom">
                                <p class="title">促&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;销</p>
                                <div><i>${goodsDetail.promoteSales.type}</i><span>${goodsDetail.promoteSales.content}</span></div>
                            </div>
                        </div>
                        <div class="support">
                            <div>
                                <p class="title">支&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;持</p>
                                <p class="text">${goodsDetail.support}</p>
                            </div>
                            <div>
                                <p class="title">配&nbsp;送&nbsp;至</p>
                                <p class="text">${goodsDetail.address}</p>
                            </div>
                        </div>`;
            infoTop.innerHTML = str;
//          m模板字符串是es6新提供的字符串赋值方式  反引号  在这个字符串内  可以任意写换行  拼接变量等等操作
//            var str2 = `wiojfwef
//            wef
//            wrg
//            sb
//            vbsd
//            fb89uwef90u13
//            289wef8u901
//            sdfdf2           wefewfwef          `;
//            console.log(str2)
        }
//      侧边栏tab切换
        function Tab(tabBtn,tabContent) {
            this.tabBtn = tabBtn;
            this.tabContent = tabContent;
//          在当前作用域 保存一下实例对象
            var _this = this;
            for (var i = 0; i < this.tabBtn.length; i++) {
//              给当前实例对象对应的每一个按钮添加一个索引
                this.tabBtn[i].index = i;
                this.tabBtn[i].onclick = function () {
//                  当前作用域内 无法通过this关键字访问到你的实例对象 因为事件回调函数当中this的指向是事件源
                    _this.clickFun(this);
                }
            }
        }
//      最终点击的逻辑 写在这个方法里边
        Tab.prototype.clickFun = function (btn) {
            for (var i = 0; i < this.tabContent.length; i++) {
//              当前实例对应的每一个内容区域
                this.tabContent[i].className = '';
                this.tabBtn[i].className = '';
            }
            this.tabContent[btn.index].className = 'active';
            btn.className = 'active';
        };
        asideTab();
        function asideTab() {
//          按钮集合
            var tabBtn = document.querySelectorAll('.wrap .detailWrap aside .tabWrap > h4');
//          内容区域集合
            var tabContent = document.querySelectorAll('.wrap .detailWrap aside .tabContent > div');

            var tba1 = new Tab(tabBtn,tabContent);

        }
        introTab();
        function introTab() {
            var tabBtn = document.querySelectorAll('.wrap .detailWrap .detail .tabWrap li');
            var tabContent = document.querySelectorAll('.wrap .detailWrap .detail .tabContent > div');
            var tab2 = new Tab(tabBtn,tabContent);
        }
//      选择搭配功能
        fitting();
        function fitting() {
//          获取所有的复选框
            var checkNodes = document.querySelectorAll('.wrap .detailWrap .detail .fitting .goodSuits .suits li input');
            var priceNode = document.querySelector('.wrap .detailWrap .detail .fitting .goodSuits .master p');
            var pNode = document.querySelector('.wrap .detailWrap .detail .fitting .goodSuits .result > p');

//          给所有的复选框绑定单击事件 每次点击时  遍历当前所有的复选框 只要选中的 就把value+=给price
            for (var i = 0; i < checkNodes.length; i++) {
                checkNodes[i].onclick = function () {
//                  在每次点击时 获取最新的商品价格
                    var price = parseInt(priceNode.innerHTML.substr(1));
                    for (var i = 0; i < checkNodes.length; i++) {
                        if(checkNodes[i].checked){
//                          只要能够进入这个if当中 说明当前这个索引对应的复选框是选中
                            price+=parseInt(checkNodes[i].value);
                        }
                    }
//                    console.log(price)
                    pNode.innerHTML = '¥'+price;
                }
            }


        }
//      侧边栏点击
        toolClick();
        function toolClick() {
//          获取侧边栏按钮
            var toolBtn = document.querySelector('.wrap .toolBar .toolBtn');
//          获取侧边栏父容器
            var toolBar = document.querySelector('.wrap .toolBar');
            var flag = false;//  默认为false  对应收起状态   true展开状态
            toolBtn.onclick = function () {
                if(flag){
//                  如果能够进入这个if当中说明当前flag是true  对应展开的状态 我们要执行收起的逻辑
                    toolBar.className = 'toolBar toolOut';
                    this.className = 'toolBtn list'

                }else{
//                  如果能够进入这个else当中说明当前flag是false  对应收起的状态 我们要执行展开的逻辑
                    toolBar.className = 'toolBar toolWrap';
                    this.className = 'toolBtn cross'
                }
                flag = !flag;
            }

        }

    }
</script>
</body>
</html>